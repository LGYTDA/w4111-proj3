<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professor Profile - {{ professor.name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
<a href="{{ url_for('all_professors') }}" class="back-link">‚Üê Back to Professors</a>

<div class="section">
    <h1>{{ professor.name }}</h1>
    {% if session.get('role') == 'professor' %}
    <div class="action-buttons">
        <a href="{{ url_for('edit_professor', staff_id=professor.staff_id) }}" class="btn-cancel">Edit Profile</a>
    </div>
    {% endif %}

    <div class="basic-info">
        <p>Staff ID: {{ professor.staff_id }}</p>
        <p>Email: {{ professor.email }}</p>
        <p>Research Focus: {{ professor.research_focus }}</p>
    </div>
</div>

{% if departments %}
<div class="section">
    <h2>Departments & Affiliations</h2>
    {% for dept in departments %}
    <div class="department-card">
        <p class="university-name">{{ dept.university_name }}</p>
        <p class="dept-name" style="padding-left: 20px;">{{ dept.dept_name }}</p>
    </div>
    {% endfor %}
</div>
{% endif %}

<div class="section">
    <h2>Leads Research Projects</h2>
    {% if projects %}
    <table>
        <thead>
        <tr>
            <th>Project Title</th>
            <th>Status</th>
            <th>Start Date</th>
            <th>Applicants</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        {% for project in projects %}
        <tr>
            <td><a href="{{ url_for('view_project', project_id=project.project_id) }}">{{ project.title }}</a></td>
            <td><span class="status-chip">{{ project.status }}</span></td>
            <td>{{ project.start_date }}</td>
            <td>{{ project.applicant_count }}</td>
            <td>
                <a href="{{ url_for('view_project', project_id=project.project_id) }}" class="btn-view">View</a>
                <a href="{{ url_for('edit_project', project_id=project.project_id) }}" class="btn-edit">Edit</a>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty-state">
        This professor is not leading any projects currently.
    </div>
    {% endif %}
    {% if session.get('role') == 'professor' %}
    <div class="action-buttons">
        <a href="{{ url_for('add_project', staff_id=professor.staff_id) }}" class="btn-submit">Create New Project</a>
    </div>
    {% endif %}

</div>

<div class="section">
    <h2>Advisees</h2>
    {% if students %}
    <table>
        <thead>
        <tr>
            <th>Student Name</th>
            <th>Academic Level</th>
            <th>Year of Study</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        {% for student in students %}
        <tr>
            <td><a href="{{ url_for('student_profile', student_id=student.student_id) }}">{{ student.name }}</a></td>
            <td>{{ student.academic_level }}</td>
            <td>{{ student.year_of_study }}</td>
            <td>
                <a href="{{ url_for('student_profile', student_id=student.student_id) }}" class="btn">View</a>
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty-state">
        This professor does not have any advisees currently.
    </div>
    {% endif %}
</div>

<script>
    // Removed the color-based status chip code since we're keeping them neutral
</script>
</body>
</html>